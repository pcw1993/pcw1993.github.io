[{"title":"screen的相关用法笔记","url":"/2019/04/02/screen的相关用法笔记/","content":"\n<http://man.linuxde.net/screen>\n\n\n\n#### screen  \n\n\n\nscreen就是开启一个新的终端，利用这个工具可以确保任务不会因为退出某个终端而终止。\n\n\n\n```shell\nscreen  # 输入命令screen会打开一个终端，ctrl+a然后ctrl+d会退出该终端。\n\n[detached from 17799.pts-1.cent01] \n\nscreen\n\n[detached from 17834.pts-1.cent01] \n\nscreen -ls # 列出有哪些screen终端以及他们的编号\n```\n\n\n\n```shell\nThere are screens on: \n\n    17834.pts-1.cent01  (Detached) \n\n    17799.pts-1.cent01  (Detached) \n\n    14030.pts-1.cent01  (Detached) \n\n    13942.pts-1.cent01  (Detached) \n\n4 Sockets in /var/run/screen/S-root. \n```\n\n\n\n#### 进入某个screen\n\n```shell\nscreen -r 13942 //进入screen 13942\n```\n\n\n\n#### 创建新的screen\n\n\n\n```shell\nscreen -S \"abc\" # 使用-S为一个screen终端命名，避免弄不清哪个终端是什么作用。\n[detached from 17928.abc] \n```\n\n\n\n#### 列举所有screen\n\n```shell\nscreen -ls\n```\n\n```shell\nThere are screens on: \n\n    17928.abc   (Detached) \n\n    17834.pts-1.cent01  (Detached) \n\n    17799.pts-1.cent01  (Detached) \n\n    14030.pts-1.cent01  (Detached) \n\n    13942.pts-1.cent01  (Detached) \n\n5 Sockets in /var/run/screen/S-root. \n```\n\n\n\n#### 关闭某个screen\n\n\n\n```shell\nscreen -X -S 21778 quit \n```\n\n\n\n#### 退出某个screen\n\nctrl+a然后ctrl+d会退出该终端。\n\n\n\n#### 清除dead 会话\n\n如果由于某种原因其中一个会话死掉了（例如人为杀掉该会话），这时screen -list会显示该会话为dead状态。使用screen -wipe命令清除该会话：\n\n![](/image/4CD78D32-3E3C-492E-9D92-2B188E4D4054.jpg)","tags":["shell"]},{"title":"使用github创建自己的博客","url":"/2019/04/01/使用github创建自己的博客/","content":"\n### 一、创建github项目\n\n\n\n- 创建仓库\n\n  访问：https://github.com 注册账号并登陆\n\n  登陆后创建新的仓库，如图：\n\n  ![创建仓库](/image/Jietu20190401-173918@2x-4114526.jpg)\n\n  ![输入地址](/image/Jietu20190401-174202@2x.jpg)\n\n  我这里因为我已经创建了，会提示已经存在，你只需要在这里填上你自己的域名即可，必须以 `github.io` 结尾,前面写上自己的用户名。\n\n  tips：可以同时创建readme，用于介绍项目，也可以不创建。\n\n- 相关设置\n\n  进入setting\n\n  ![setting](/image/Jietu20190401-175029@2x.jpg)\n\n  ![发布](/image/Jietu20190401-175057@2x.jpg)\n\n​\t看到这里就能访问域名了，但显示的是404，因为你还没有配置文件。这里介绍使用hexo创建博客。\n\n### 二、配置ssh\n\n##### 1、按照如下命令创建ssh密钥对\n\n```shell\ncd ~/.ssh\nls\n#此时会显示一些文件\nmkdir key_backup\ncp id_rsa* key_backup\nrm id_rsa*  \n#以上三步为备份和移除原来的SSH key设置\nssh-keygen -t rsa -C \"邮件地址@youremail.com\" #生成新的key文件,邮箱地址填你的Github地址\n#Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):<回车就好>\n#接下来会让你输入密码\n```\n\n##### 2、添加SSH Key到Github\n\n​\t![setting](/image/Jietu20190401-180652@2x.jpg)\n\n​\t![ssh](/image/Jietu20190401-180730@2x.jpg)\n\n​\t![newssh](/image/Jietu20190401-180807@2x.jpg)\n\n​\t![copy](/image/Jietu20190401-180833@2x.jpg)\n\n做到这一步就可以测试一下是否配置成功了:\n\n```shell\nssh -T git@github.com\n#之后会要你输入yes/no,输入yes就好了。\n```\n\n设置账号信息：\n\n```shell\ngit config --global user.name \"你的名字\"     #真实名字不是github用户名\ngit config --global user.email \"邮箱@邮箱.com\"    #github邮箱\n```\n\n\n\n### 三、安装Hexo\n\n​\t要使用Hexo,需要安装Nodejs以及Git\n\n#### 安装Node.js\n\n​\t<a href=\"<https://nodejs.org/en/download/>\" target=\"_blank\">下载Node.js</a>\n\n​\t参考：<a href=\"<http://www.runoob.com/nodejs/nodejs-install-setup.html>\" target=\"_blank\">安装Node.js</a>\n\n#### 安装git\n\n​\t<a href=\"<https://git-scm.com/download/>\" target=\"_blank\">下载git</a>\n\n#### 安装Hexo\n\n\n\n```shell\nnpm install hexo-cli -g   \nhexo init #初始化网站   \nnpm install   \nhexo g #生成或 hexo generate   \nhexo s #启动本地服务器 或者 hexo server,这一步之后就可以通过http://localhost:4000  查看了\n```\n\n*详细命令参考*<a href=\"<https://hexo.io/docs/commands.html>\" target=\"_blank\">Hexo文档</a>\n\n```shell\nhexo new \"文章名\" #新建文章\nhexo new page \"页面名\" #新建页面 \n```\n\n常用简写命令\n\n```shell\nhexo n == hexo new\nhexo g == hexo generate\nhexo s == hexo server\nhexo d == hexo deploy\n```\n\n新建一篇文章后就可以预览了,在hexo new之后执行一次生成hexo g再执行hexo s启动本地服务器,如果之前还在hexo s 按Ctrl + C 结束.\n\n### 四、添加主题\n\n#### 安装主题\n\n到<a href=\"<https://hexo.io/themes/>\" target=\"_blank\">官网</a>等渠道选择主题，下载或clone到本地，放入theme文件夹下\n\n#### 启动主题\n\n找到主目录_config.yml文件，打开并设置属性 theme: <你的主题名字>\n\n![theme](/image/Jietu20190401-181903@2x.jpg)\n\n使用命令生成页面并发布\n\n```shell\nhexo g  # 生成\nhexo s  # 本地访问\n```\n\n发布需要配置_config.yml文件\n\n```shell\ndeploy:\n    type: git\n    repo: git@github.com:pcw1993/pcw1993.github.io.git  #这里的网址填你自己的\n    branch: master\n```\n\n保存后需要提前安装一个扩展：\n\n```shell\nnpm install hexo-deployer-git --save   \n```\n\n发布：\n\n```\nhexo d  # 发布\n```\n\n访问域名即可看到已生成的博客页面"},{"title":"python使用happybase操作Hbase及Hbase在linux系统下的安装","url":"/2019/04/01/python使用happybase操作Hbase及Hbase在linux系统下的安装/","content":"\n# 安装Hbase\n\n安装请前往Hbase[官方网站](http://mirrors.hust.edu.cn/apache/hbase/)，下载版本根据需求自行选择。bin和src文件都需要下载并解压\n\n```plain\ntar zxvf hbase-x.x.x-bin.tar.gz\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n# 部署jdk并设置java环境 \n\n自行下载jdk并解压到、usr/java中\n\nroot用户下\n\n```plain\nvi .bash_profile\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n写入以下内容\n\n```plain\nexport JAVA_HOME=/usr/java/jdk1.8.0\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n执行该文件\n\n```plain\nsource .bash_profile\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n使用命令java -version检查是否安装成功\n\n# 启动和停止HBase \n\nhbase-x.x.x/bin目录下，sh start-hbase.sh”或“./start-hbase.sh”命令启动HBase\n\n出现了以下内容表示启动成功\n\n```plain\nstarting master, logging to /root/zhouzx/hbase-1.0.1/bin/../logs/hbase-root-master-A10168992.out\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\nsh stop-hbase.sh”或“./stop-hbase.sh”命令停止HBase\n\n# 安装thrift\n\n## 安装依赖\n\n```plain\nsudo apt-get install automake bison flex g++ git libboost1.55 libevent-dev libssl-dev libtool make pkg-config\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n[下载thrift](https://thrift.apache.org/download)\n\n## 编译安装\n\n```plain\ntar -zxvf thrift-0.11.0.tar.gz\ncd thrift-0.11.0/\n./configure --with-cpp --with-boost --with-python --without-csharp --with-java --without-erlang --without-perl --with-php --without-php_extension --without-ruby --without-haskell  --without-go\nsudo make\nsudo make install\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n## 启动服务\n\n```plain\nbin/hbase-daemon.sh start thrift\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n## 使用jps命令检查服务是否都已启动\n\n```plain\nroot@ubuntu:~/Hbase/hbase-1.4.2# jps\n7393 Jps\n4549 ThriftServer\n7190 HMaster\n2575 Main\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n\n\n# 安装happybase\n\n\n\n所在虚拟环境中\n\n```plain\npip install happybase\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)\n\n具体其他用法请参考[happybase文档](https://happybase.readthedocs.io/en/latest/)\n\n```python\nimport happybase\n\n\n\"\"\"\n必须先启动hbase，hbse目录bin/start-hbase.sh\n要先在hbase某个节点上开启thrift服务\n\"\"\"\n\n\n# hbase thrift -p 9090 start\nconnection = happybase.Connection('localhost', autoconnect=False)\nconnection.open()\n\n\n# families = {\n#     'cf1': dict(max_versions=10),\n#     'cf2': dict(max_versions=1, block_cache_enabled=False),\n#     'cf3': dict(),  # use defaults\n# }\n# connection.create_table('mytable', families)\n# connection.create_table('datatest1', )\n\n\n# print所有的表名\nprint('All tables: ', connection.tables(), '\\n')\n\n\n# 操作testtable表\n# 这个操作是一个提前声明-我要用到这个表了-但不会提交给thrift server做操作\ntable = connection.table('mytable')\n\n\n# table.put('row1', {'cf1:content': 'pe', 'cf1:price': '23'})\n# table.put('row2', {'cf1:content': 'pe2', 'cf1:price': '232'})\n\n\n# 检索某一行\nrow = table.row(b'row1')\nprint('a row:', row, '\\n')\n#\n# right\nprint(row[b'cf1:content'])\nprint(row[b'cf1:price'])\n#\n# # wrong,这个是错误的，必须加b\n# print(row['cf1:content'])\n# print(row['cf1:price'])\n#\n# 显示所有列族\nprint('所有列族', table.families(), '\\n')\n#\n# 输出两列\nprint('print two rows:')\nrows = table.rows([b'row1', b'row2'])\nfor key, data in rows:\n    print(key, data)\n#\n# 字典输出两列\nprint('\\n', 'print two dict rows')\nrows_as_dict = dict(table.rows([b'row1', b'row2']))\nprint(rows_as_dict)\n#\n# 输入row的一个列族所有值\nrow = table.row(b'row2', columns=[b'cf1'])\nprint('\\n', '输出一个列族', row)\n#\n# scan操作\nprint('\\n', 'do scan')\nfor key, data in table.scan():\n    print(key, data)\n\n\n\n\n\"\"\"\nAll tables:  [b'mytable']\n\n\na row: {b'cf2:price': b'23', b'cf1:content': b'pe', b'cf1:price': b'23'}\n\n\nb'pe'\nb'23'\n所有列族 {b'cf3': {'block_cache_enabled': False, 'max_versions': 3, 'name': b'cf3:', 'time_to_live': 2147483647, 'bloom_filter_type': b'NONE', 'in_memory': False, 'compression': b'NONE', 'bloom_filter_vector_size': 0, 'bloom_filter_nb_hashes': 0}, b'cf1': {'block_cache_enabled': False, 'max_versions': 10, 'name': b'cf1:', 'time_to_live': 2147483647, 'bloom_filter_type': b'NONE', 'in_memory': False, 'compression': b'NONE', 'bloom_filter_vector_size': 0, 'bloom_filter_nb_hashes': 0}, b'cf2': {'block_cache_enabled': False, 'max_versions': 1, 'name': b'cf2:', 'time_to_live': 2147483647, 'bloom_filter_type': b'NONE', 'in_memory': False, 'compression': b'NONE', 'bloom_filter_vector_size': 0, 'bloom_filter_nb_hashes': 0}}\n\n\nprint two rows:\nb'row1' {b'cf2:price': b'23', b'cf1:content': b'pe', b'cf1:price': b'23'}\nb'row2' {b'cf1:content': b'pe2', b'cf1:price': b'232'}\n\n\n print two dict rows\n{b'row1': {b'cf2:price': b'23', b'cf1:content': b'pe', b'cf1:price': b'23'}, b'row2': {b'cf1:content': b'pe2', b'cf1:price': b'232'}}\n\n\n 输出一个列族 {b'cf1:content': b'pe2', b'cf1:price': b'232'}\n\n\n do scan\nb'row1' {b'cf2:price': b'23', b'cf1:content': b'pe', b'cf1:price': b'23'}\nb'row2' {b'cf1:content': b'pe2', b'cf1:price': b'232'}\n\"\"\"\n```\n\n![点击并拖拽以移动](data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==)","tags":["hbase"]},{"title":"mysql8.0.12重置root密码方法","url":"/2019/04/01/mysql8-0-12重置root密码方法/","content":"@[TOC](mysql8.0.12重置root密码方法)\n\n# 问题\nmysql登录无法连接，问题未知，就是连接不上，报错：\n```\nERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)\nERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)\n```\n\n# 解决办法\n## 重置root密码，网上很多错误方法\n```sql\nupdate user set Password=password(\"新密码\") where User='root';\nupdate user set authentication_string=password(\"新密码\") where User='root';\n```\n以上这些，都是错的！！！错的！！！但搜索很多结果都这么写，诚然，以前的版本是这样，但你们标着大大的8.0以后的版本写着这些错误的方法是干嘛？一个个复制粘贴党！！！\n\n经过多次试验，终于找到症结所在，以前的password()函数已经不用了，正确的语句应该是\n```sql\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';\n```\n\n## 完整步骤\n打开终端\n```shell\nmysqld_safe --user=mysql --skip-grant-tables --skip-networking \n// 下面的也是不行的\nmysqld -nt --skip-grant-tables\n```\n再另外打开一个终端窗口\n```sql\nuse mysql;\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';\nflush privileges;\n\\q; //退出\n```\n\n搞定！\n","tags":["mysql"]},{"title":"Hello World","url":"/2019/04/01/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"}]